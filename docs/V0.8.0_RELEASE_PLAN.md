# v0.8.0 Release Plan: "From Spaghetti to Seed"

**Status:** Draft for Approval
**Created:** 2026-01-01
**Target Release:** 2026-01-20 (19 days)
**Theme:** Consolidation + Architecture Foundation

---

## Executive Summary

v0.8.0 consolidates 3 overlapping work efforts, completes critical missing features, and lays the architectural foundation for AI-powered agents. This release transforms the codebase from a monolithic "spaghetti" structure into a modular "seed" architecture ready for growth.

### Key Metrics

| Metric | Current | Target | Impact |
|--------|---------|--------|--------|
| **Active Work Efforts** | 3 (overlapping) | 1 (unified) | -67% complexity |
| **Incomplete Tickets** | 32 pending | 14 pending | Complete 18 critical items |
| **app.js LOC** | 3,038 (monolith) | ~1,200 + modules | Modular architecture |
| **Legacy CSS LOC** | 5,044 | 0 (deleted) | 100% modular migration |
| **Duplicate CSS Selectors** | 93 | 0 | Clean architecture |
| **Missing Features** | 2 critical | 0 | Feature complete |

---

## Current State Audit

### Overlapping Work Efforts (PROBLEM)

Three active work efforts are stepping on each other:

1. **WE-251227-fwmv** - Mission Control Responsive & Interactive Features
   - Status: 1/5 tickets complete
   - Focus: Responsive CSS, detail view, controls
   - Created: Dec 27, 2025

2. **WE-251231-un7r** - Mission Control V3 - Responsive Rewrite
   - Status: 0/17 tickets complete
   - Focus: Ground-up CSS rewrite, mobile-first
   - Created: Dec 31, 2025

3. **WE-251231-sdc6** - Mission Control V3 - Phase 2 Component Migration
   - Status: 0/9 tickets complete
   - Focus: Migrate remaining components from legacy CSS
   - Created: Dec 31, 2025

**Problem:** All three are trying to solve responsive CSS + component migration. Need unified approach.

### Architecture Pain Points

#### 1. Monolithic JavaScript (app.js: 3,038 lines)

```javascript
class MissionControl {
  // Everything in one class:
  // - WebSocket management
  // - State management
  // - UI rendering
  // - Event handling
  // - Activity tracking
  // - Notifications
  // - Demo system (220+ lines)
  // - Charts
  // - Search
  // - Filters
  // ... 50+ methods
}
```

**Impact:**
- Hard to test
- Hard to extend
- Hard for AI agents to understand and modify
- Circular dependencies
- No clear separation of concerns

#### 2. Legacy CSS (styles.css: 5,044 lines)

| Category | Lines | % | Action Needed |
|----------|-------|---|---------------|
| KEEP (minor tweaks) | ~1,800 | 36% | Update selectors |
| REFACTOR (significant) | ~1,400 | 28% | Restructure |
| REWRITE (from scratch) | ~1,400 | 28% | Delete & rebuild |
| DELETE (obsolete) | ~400 | 8% | Remove |

**Problems:**
- Desktop-first (wrong approach)
- 93 duplicate selectors
- Inconsistent naming
- No component isolation
- Hard to maintain

#### 3. Incomplete Features

**Missing Critical Features:**
- âŒ Ticket detail view (started, not complete)
- âŒ Work effort CRUD controls (trigger/edit/cancel)
- âŒ Mobile responsive (partially implemented)

**Planning Debt:**
- âœ“ DEMO_OVERHAUL_PLAN.md (534 lines, not implemented)
- âœ“ DETAIL_VIEW_OVERHAUL_COMPLETE.md (404 lines, partially done)

---

## v0.8.0 Strategy

### Core Principle: Seed Architecture

The "Seed" pattern structures code like a growing organism:

```
Seed (Core)
â”œâ”€â”€ Kernel (immutable core logic)
â”œâ”€â”€ Roots (data layer: repos, state, persistence)
â”œâ”€â”€ Stem (transport: WebSocket, HTTP)
â””â”€â”€ Leaves (UI: components, views, interactions)
```

**Benefits for AI Agents:**
- Clear boundaries (AI knows where to look)
- Explicit dependencies (no circular refs)
- Testable units (AI can validate changes)
- Extension points (AI can add features safely)
- Self-documenting (structure conveys intent)

**See:** `ARCHITECTURE_PROPOSAL.md` for full specification

---

## Epic Breakdown

### Epic 1: Architecture Migration (Seed Strategy)

**Goal:** Break monolith into modular seed structure
**Estimated Time:** 32 hours (4 days)

| Ticket | Description | Hours | Priority |
|--------|-------------|-------|----------|
| TKT-080-001 | Extract Kernel (config, constants, utils) | 4h | P0 |
| TKT-080-002 | Create Roots (RepositoryManager, StateManager) | 6h | P0 |
| TKT-080-003 | Create Stem (WebSocketTransport, APIClient) | 6h | P0 |
| TKT-080-004 | Create Leaves (View components as modules) | 8h | P0 |
| TKT-080-005 | Wire seed with DI container | 4h | P0 |
| TKT-080-006 | Add seed architecture tests | 4h | P1 |

**Output:**
- app.js: ~300 lines (bootstrap only)
- lib/seed/: 8 focused modules (~150 lines each)
- 90%+ test coverage on core modules

---

### Epic 2: CSS Migration & Cleanup

**Goal:** Complete CSS modular migration, delete legacy
**Estimated Time:** 20 hours (2.5 days)

| Ticket | Description | Hours | Priority |
|--------|-------------|-------|----------|
| TKT-080-007 | Migrate form components (search, filters, buttons) | 4h | P0 |
| TKT-080-008 | Migrate overlay components (modals, toasts) | 4h | P0 |
| TKT-080-009 | Migrate queue item cards and badges | 4h | P0 |
| TKT-080-010 | Fix duplicate selector issues | 4h | P1 |
| TKT-080-011 | Delete legacy styles.css entirely | 4h | P0 |

**Output:**
- styles.css: DELETED
- styles/components/: 12 modular CSS files
- 0 duplicate selectors
- Mobile-first approach throughout

---

### Epic 3: Complete Critical Features

**Goal:** Finish ticket detail view and CRUD controls
**Estimated Time:** 16 hours (2 days)

| Ticket | Description | Hours | Priority |
|--------|-------------|-------|----------|
| TKT-080-012 | Complete ticket detail view (modal/page) | 8h | P0 |
| TKT-080-013 | Add work effort trigger/edit/cancel controls | 8h | P0 |

**Output:**
- Ticket detail view works on all devices
- Users can start/pause/complete/archive work efforts from any view
- Full CRUD operations available

---

### Epic 4: Testing, Documentation & Release

**Goal:** Polish, test, document, and ship
**Estimated Time:** 16 hours (2 days)

| Ticket | Description | Hours | Priority |
|--------|-------------|-------|----------|
| TKT-080-014 | Write integration tests for seed architecture | 6h | P1 |
| TKT-080-015 | Create ADR for seed pattern | 2h | P1 |
| TKT-080-016 | Update ARCHITECTURE.md with new structure | 4h | P1 |
| TKT-080-017 | Write v0.8.0 release notes | 2h | P0 |
| TKT-080-018 | Create migration guide (v0.6 â†’ v0.8) | 2h | P1 |

**Output:**
- Test coverage >80%
- ADR documents decision rationale
- Clear migration path for contributors
- Comprehensive release notes

---

## Timeline

### Phase 1: Setup & Planning (Days 1-2)

- Archive overlapping work efforts
- Create unified WE-v0.8.0 work effort
- Set up feature branch
- Review and approve this plan
- Create tracking tickets

### Phase 2: Architecture Migration (Days 3-6)

- TKT-080-001 through TKT-080-006
- Extract monolith into seed modules
- Wire with DI container
- Test core functionality

**Milestone:** Seed architecture working, tests passing

### Phase 3: CSS Completion (Days 7-9)

- TKT-080-007 through TKT-080-011
- Complete component migrations
- Delete legacy CSS
- Fix duplicate selectors

**Milestone:** Zero legacy CSS, fully modular

### Phase 4: Feature Completion (Days 10-11)

- TKT-080-012 through TKT-080-013
- Ticket detail view
- CRUD controls

**Milestone:** Feature complete

### Phase 5: Testing & Polish (Days 12-14)

- TKT-080-014 through TKT-080-018
- Tests
- Documentation
- Release prep

**Milestone:** Ready to ship

### Phase 6: Review & Deploy (Days 15-19)

- Code review
- Manual testing
- Bug fixes
- PR merge
- v0.8.0 release

**Milestone:** v0.8.0 shipped! ðŸŽ‰

---

## Success Criteria

### Technical Metrics

- âœ… app.js reduced from 3,038 to <300 lines
- âœ… 8+ seed modules created with clear responsibilities
- âœ… Legacy styles.css deleted (5,044 lines gone)
- âœ… 0 duplicate CSS selectors
- âœ… Test coverage >80%
- âœ… 0 linting errors
- âœ… Build time <5s

### Feature Completeness

- âœ… Ticket detail view works on all devices
- âœ… Work effort CRUD controls functional
- âœ… Mobile responsive (320px+)
- âœ… No regressions in existing features

### Documentation

- âœ… ADR created for seed pattern
- âœ… ARCHITECTURE.md updated
- âœ… Migration guide written
- âœ… Release notes complete
- âœ… Inline code comments >70%

### Developer Experience

- âœ… Clear module boundaries
- âœ… AI agents can understand structure
- âœ… Easy to add new features
- âœ… Fast test execution (<10s)

---

## Risks & Mitigation

| Risk | Severity | Impact | Mitigation |
|------|----------|--------|------------|
| Breaking existing functionality | High | Users can't use app | Comprehensive testing, feature flags, gradual rollout |
| CSS migration causes visual regressions | Medium | UI looks broken | Visual regression tests, before/after screenshots |
| Seed architecture too complex | Medium | Slow development | Keep it simple, document patterns, provide examples |
| Timeline slips | Medium | Late release | Buffer time built in, can cut Epic 4 docs if needed |
| AI agents confused by new structure | Low | Slower AI development | Excellent documentation, clear naming, examples |

---

## What Gets Deferred (Out of Scope for v0.8.0)

- âŒ Demo system overhaul (defer to v0.9.0)
- âŒ Real-time graphs/statistics (defer to v0.9.0)
- âŒ Advanced agent assignment UI (defer to v0.9.0)
- âŒ EventBus/ToastManager/AnimationController refactor (working, keep as-is)
- âŒ WebSocket reconnection improvements (working, keep as-is)

**Rationale:** Focus on consolidation and foundation. Feature additions come in v0.9.0+

---

## Dependencies

### Required Before Start
- âœ… This plan approved
- âœ… Unified work effort created
- âœ… Overlapping WEs archived
- âœ… Feature branch created

### Required During Development
- Node.js 18+ (current)
- npm 9+ (current)
- Git (current)
- No new external dependencies

### Nice to Have
- Visual regression testing tool (optional)
- Bundle analyzer (optional)
- Coverage visualization (optional)

---

## Post-Release (v0.9.0 and Beyond)

With the seed architecture in place, future releases can:

1. **v0.9.0: AI Agent Integration**
   - Agents understand seed structure
   - Can modify specific modules safely
   - Clear extension points for new capabilities

2. **v0.10.0: Demo System Overhaul**
   - Implement DEMO_OVERHAUL_PLAN.md
   - Scenario-based demos
   - State persistence

3. **v0.11.0: Advanced Features**
   - Real-time graphs
   - Agent assignment UI
   - Advanced monitoring

**The seed architecture makes all of this possible.**

---

## Approval & Sign-Off

**Questions for Stakeholders:**

1. Is the scope right? Too big? Too small?
2. Should we include demo overhaul in v0.8.0? (adds 5 days)
3. Any concerns about the seed architecture approach?
4. Timeline acceptable? (19 days to release)
5. Okay to archive the 3 overlapping work efforts?

**Approval Checklist:**
- [ ] Scope approved
- [ ] Timeline approved
- [ ] Architecture approach approved
- [ ] Ready to create work effort
- [ ] Ready to begin implementation

---

**Next Steps:**
1. Get approval on this plan
2. Create WE-v0.8.0 unified work effort
3. Archive WE-251227-fwmv, WE-251231-un7r, WE-251231-sdc6
4. Create feature branch
5. Begin Epic 1 (Architecture Migration)

---

*Document Version: 1.0*
*Last Updated: 2026-01-01*
*Author: Claude Code AI*
